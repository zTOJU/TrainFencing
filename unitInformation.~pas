unit unitInformation;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  TfrmInformation = class(TForm)
    Titel: TLabel;
    Titel2: TLabel;
    listNames: TListBox;
    editName: TEdit;
    btnAddName: TButton;
    btnDelName: TButton;
    labNameCount: TLabel;
    btnSubmitNames: TButton;
    procedure btnAddNameClick(Sender: TObject);
    procedure btnDelNameClick(Sender: TObject);
    procedure btnSubmitNamesClick(Sender: TObject);
  private
    { Private-Deklarationen }
  public
    { Public-Deklarationen }
  end;

var
  frmInformation: TfrmInformation;
  nameCount : Integer;

implementation

uses unitMain, unitParticipant;

{$R *.dfm}

// Add new name
procedure TfrmInformation.btnAddNameClick(Sender: TObject);
begin
  if Length(editName.Text) > 0
    then begin
      listNames.Items.Add(editName.Text);
      editName.Text := '';
      nameCount := nameCount + 1;
      labNameCount.Caption := 'Gesamt: ' + IntToStr(nameCount);
    end;
end;

// Delete selected name
procedure TfrmInformation.btnDelNameClick(Sender: TObject);
begin
  if listNames.ItemIndex > -1
    then begin
      listNames.Items.Delete(listNames.ItemIndex);
      nameCount := nameCount - 1;
      labNameCount.Caption := 'Gesamt: ' + IntToStr(nameCount);
      end
    else ShowMessage('Bitte erst einen Namen auswählen!');
end;

procedure TfrmInformation.btnSubmitNamesClick(Sender: TObject);
begin
  if listNames.Count > 1
    then begin
      // Hide old elements
      editName.Hide;
      btnAddName.Hide;
      btnDelName.Hide;
      btnSubmitNames.Hide;
      listNames.Hide;
      labNameCount.Hide;

      // Create participants list
      unitParticipant.generateList(frmInformation.listNames.Items);
      unitMain.setTabStatus(1, true);
      {for i:=0 to nameCount - 1
        do begin
          frmParticipant.sgNames.Cells[0, i] := IntToStr(i+1) + '. ' + frmInformation.listNames.Items[i];
          if i > 0
            then frmParticipant.sgNames.RowCount := frmParticipant.sgNames.RowCount + 1;
        end;}

      // Create rounds
      unitMain.setTabStatus(2, true);
    end
    else ShowMessage('Bitte füge erst mindestens 2 Namen hinzu!');
end;

end.
